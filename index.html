<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Cena di San Valentino â¤ï¸</title>

<style>
body {
  margin: 0;
  height: 100vh;
  background: linear-gradient(135deg, #ff758c, #ff7eb3);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  font-family: 'Comic Sans MS', cursive;
  overflow: hidden;
  color: white;
  text-align: center;
}

.intro {
  font-size: 2.1rem;  /* piÃ¹ piccolo dei 3rem di default */
  text-shadow: 2px 2px #ff3b6f; /* opzionale, piÃ¹ delicato */
  margin: 5px 0; /* margine verticale piÃ¹ piccolo */
}

h1 {
  font-size: 3rem;
  text-shadow: 3px 3px #ff3b6f;
}

.box {
  position: relative;
  width: 360px;
  height: 240px;
  margin-top: 30px;
}

button {
  position: absolute;
  padding: 15px 30px;
  font-size: 20px;
  border-radius: 15px;
  border: none;
  cursor: pointer;
  transition: left 0.25s ease, top 0.25s ease, transform 0.15s ease;
}

#yes {
  background: #4CAF50;
  color: white;
  left: 40px;
  top: 100px;
}

#no {
  background: #ff3b6f;
  color: white;
  left: 220px;
  top: 100px;
}

.heart {
  position: fixed;
  font-size: 26px;
  animation: float 3s linear forwards;
}

@keyframes float {
  from { transform: translateY(0); opacity: 1; }
  to { transform: translateY(-160px); opacity: 0; }
}

@keyframes pop {
  0% { transform: scale(0); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}
</style>
</head>

<body>

<h1 class="intro">Ti andrebbe di cenare insieme il giorno di San Valentino?â¤ï¸</h1>

<div class="box" id="box">
  <button id="yes">SÃ¬ ğŸ’•</button>
  <button id="no">No ğŸ’”</button>
</div>

<script>
const box = document.getElementById("box");
const yesBtn = document.getElementById("yes");
const noBtn = document.getElementById("no");

let attempts = 0;

const noTexts = [
    "No ğŸ’”",
    "ouuu statti ferma ğŸ˜…",
    "jaaaaa ğŸ¥º",
    "mo ti mignu ğŸ˜­",
    "okk ja gut basta ğŸ™„",
    "ja gut tschuss ğŸ˜³",
	"fatyyy non devi premere qui... ğŸ˜­ğŸ˜­ğŸ˜­"
];

// posizione iniziale NO
let pos = { x: noBtn.offsetLeft, y: noBtn.offsetTop };

// funzione per muovere il NO evitando sempre il SÃŒ
function moveNo() {
  attempts++;

  const maxX = box.clientWidth - noBtn.offsetWidth;
  const maxY = box.clientHeight - noBtn.offsetHeight;

  const yesRect = yesBtn.getBoundingClientRect();
  const boxRect = box.getBoundingClientRect();

  let x = 0, y = 0;
  let safe = false;
  let tries = 0;

  while (!safe && tries < 10) {
    tries++;
    x = Math.random() * maxX;
    y = Math.random() * maxY;

    const noLeft = boxRect.left + x;
    const noTop  = boxRect.top + y;
    const noRight = noLeft + noBtn.offsetWidth;
    const noBottom= noTop + noBtn.offsetHeight;

    const overlap = !(noRight < yesRect.left || noLeft > yesRect.right ||
                      noBottom < yesRect.top || noTop > yesRect.bottom);

    if (!overlap) safe = true;
  }

  // se non trova posizione libera, spostamento minimo casuale
  if (!safe) {
    x = pos.x + (Math.random()*50 - 25);
    y = pos.y + (Math.random()*50 - 25);
  }

  // bonus di movimento molto piÃ¹ ampio
  const bonus = Math.min(attempts * 10, 120); // fino a 120px extra
  x += Math.random() * bonus - bonus/2;
  y += Math.random() * bonus - bonus/2;

  x = Math.max(0, Math.min(x, maxX));
  y = Math.max(0, Math.min(y, maxY));

  pos.x = x;
  pos.y = y;

  noBtn.style.left = pos.x + "px";
  noBtn.style.top  = pos.y + "px";

  // rimpicciolisce leggermente con il tempo
  noBtn.style.transform = `scale(${Math.max(0.6, 1 - attempts*0.03)})`;

  // frasi in loop
  noBtn.textContent = noTexts[attempts % noTexts.length];
}


// eventi: mouse e click
noBtn.addEventListener("mouseenter", moveNo);
noBtn.addEventListener("click", moveNo); // fallback

// SÃŒ
yesBtn.onclick = () => {
  // Svuota la pagina
  document.body.innerHTML = "";

  // Contenitore minimal
  const container = document.createElement("div");
  container.style.height = "100vh";
  container.style.display = "flex";
  container.style.justifyContent = "center";
  container.style.alignItems = "center";
  container.style.flexDirection = "column";
  container.style.background = "linear-gradient(135deg, #ff758c, #ff7eb3)";
  document.body.appendChild(container);

  // Messaggio interattivo
  const hint = document.createElement("p");
  hint.textContent = "Beneeee! adesso ti sto facendo anche un cuore origami, conta fino a 3 e puoi cliccare";
  hint.style.cursor = "pointer";
  hint.style.fontSize = "1.5rem";
  hint.style.textAlign = "center";
  hint.style.padding = "20px";
  hint.style.border = "2px dashed white";
  hint.style.borderRadius = "12px";
  hint.style.transition = "all 0.3s ease";
  hint.style.userSelect = "none";
  container.appendChild(hint);

  // Hover effetto
  hint.addEventListener("mouseenter", () => {
    hint.style.transform = "scale(1.05)";
    hint.style.backgroundColor = "rgba(255,255,255,0.1)";
  });
  hint.addEventListener("mouseleave", () => {
    hint.style.transform = "scale(1)";
    hint.style.backgroundColor = "transparent";
  });

  // Click per mostrare cuore + messaggio finale + canzone
  hint.onclick = () => {
    // Messaggio finale
    const h1 = document.createElement("h1");
    h1.textContent = "Buon San Valentino Faty â¤ï¸";
    h1.style.marginTop = "20px";
    container.appendChild(h1);

    // Cuore origami
    const img = document.createElement("img");
    img.src = "cuore_origami.png"; // sostituisci con il tuo file
    img.alt = "Cuore Origami";
    img.style.width = "200px";
    img.style.marginTop = "20px";
    img.style.animation = "pop 0.5s ease forwards";
    container.appendChild(img);

    // Riproduzione canzone
    const song = new Audio("tananai_rave_eclissi.mp3");
    song.play();

    // Rimuoviamo il messaggio cliccabile
    hint.remove();

    // Cuori animati in background
    setInterval(createHeart, 200);
  };
};



function createHeart() {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.textContent = "â¤ï¸";
  heart.style.left = Math.random() * 100 + "vw";
  heart.style.bottom = "0px";
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 3000);
}
</script>

</body>
</html>
